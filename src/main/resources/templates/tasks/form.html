<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head"></head>
<body>
<div th:replace="layout :: nav"></div>
<div th:replace="layout :: flash"></div>
<div class="ui text container">
    <div class="ui grid">
        <div class="twelve wide column">
            <div class="projects">
                <h2>Task</h2>
                <form th:action="@{${action}}" th:method="@{${method}}" th:object="${task}">
                    <input type="hidden" th:field="*{id}" />

                    <p>Project</p>
                    <div class="row">
                        <div class="col s12 l8" th:classappend="${#fields.hasErrors('project')}? 'error' : ''">
                            <select th:field="*{project}">
                                <div>
                                    <option th:each="project : ${projects}"
                                            th:value="${project.id}"
                                            th:selected="(*{project != null}) ? (${project.id} == *{project.id})"
                                            th:text="${project.name}">project</option>
                                </div>
                            </select>
                            <div class="error-message" th:if="${#fields.hasErrors('project')}" th:errors="*{project}"></div>
                        </div>
                    </div>

                    <p>User Assign</p>
                    <div class="row">
                        <div class="col s12 l8" th:classappend="${#fields.hasErrors('user')}? 'error' : ''">
                            <select th:field="*{user}">
                                <div>
                                    <option th:each="user : ${users}"
                                            th:value="${user.id}"
                                            th:selected="(*{user != null}) ? (${user.id} == *{user.id})"
                                            th:text="${user.username}">user</option>
                                </div>
                            </select>
                            <div class="error-message" th:if="${#fields.hasErrors('project')}" th:errors="*{user}"></div>
                        </div>
                    </div>

                    <p>Issue</p>
                    <div class="row">
                        <div class="col s12 l8" th:classappend="${#fields.hasErrors('subject')}? 'error' : ''">
                            <input type="text" th:field="*{subject}" placeholder="Subject"/>
                            <div class="error-message" th:if="${#fields.hasErrors('subject')}" th:errors="*{subject}"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 l8" th:classappend="${#fields.hasErrors('description')}? 'error' : ''">
                            <input type="text" th:field="*{description}" placeholder="Description"/>
                            <div class="error-message" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 l8" th:classappend="${#fields.hasErrors('complete')}? 'error' : ''">
                            <p>
                                <input type="checkbox" th:field="*{complete}" />
                                <label th:for="*{complete}">Complete</label>
                            </p>
                            <div class="error-message" th:if="${#fields.hasErrors('complete')}" th:errors="*{complete}"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 l8">
                            <button th:text="${submit}" type="submit" class="button">Add</button>
                            <a th:href="@{${back}}" class="button">Cancel</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>